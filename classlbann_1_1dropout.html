<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>LBANN: lbann::dropout Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LBANN
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classlbann_1_1dropout.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classlbann_1_1dropout-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lbann::dropout Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lbann::dropout:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout__inherit__graph.png" border="0" usemap="#lbann_1_1dropout_inherit__map" alt="Inheritance graph"/></div>
<map name="lbann_1_1dropout_inherit__map" id="lbann_1_1dropout_inherit__map">
<area shape="rect" id="node2" href="classlbann_1_1regularizer.html" title="lbann::regularizer" alt="" coords="5,5,130,31"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for lbann::dropout:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout__coll__graph.png" border="0" usemap="#lbann_1_1dropout_coll__map" alt="Collaboration graph"/></div>
<map name="lbann_1_1dropout_coll__map" id="lbann_1_1dropout_coll__map">
<area shape="rect" id="node2" href="classlbann_1_1regularizer.html" title="lbann::regularizer" alt="" coords="88,179,212,204"/><area shape="rect" id="node3" href="classlbann_1_1Layer.html" title="lbann::Layer" alt="" coords="103,92,198,117"/><area shape="rect" id="node4" href="classlbann_1_1lbann__comm.html" title="lbann::lbann_comm" alt="" coords="5,5,143,31"/><area shape="rect" id="node5" href="classlbann_1_1Optimizer.html" title="lbann::Optimizer" alt="" coords="167,5,285,31"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a35c2c593d6dba74281b39d271ae15ed3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a35c2c593d6dba74281b39d271ae15ed3">dropout</a> (float keep_prob=0.5f)</td></tr>
<tr class="separator:a35c2c593d6dba74281b39d271ae15ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c33aee6cc1323496120bb545cd27148"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a7c33aee6cc1323496120bb545cd27148">fp_activations</a> ()</td></tr>
<tr class="separator:a7c33aee6cc1323496120bb545cd27148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b1ecd42b39fb914cfb04fde2278e8ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a9b1ecd42b39fb914cfb04fde2278e8ed">bp_activations</a> ()</td></tr>
<tr class="separator:a9b1ecd42b39fb914cfb04fde2278e8ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlbann_1_1regularizer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlbann_1_1regularizer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlbann_1_1regularizer.html">lbann::regularizer</a></td></tr>
<tr class="memitem:a6f9e59630b11ca7b6349e0f3f3331e47 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a6f9e59630b11ca7b6349e0f3f3331e47">fp_connections</a> ()</td></tr>
<tr class="separator:a6f9e59630b11ca7b6349e0f3f3331e47 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b36f80c1f2d359e263527eb00c75341 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a3b36f80c1f2d359e263527eb00c75341">bp_connections</a> ()</td></tr>
<tr class="separator:a3b36f80c1f2d359e263527eb00c75341 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab36e9a970736527ae2e8e73b723a3de4 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#ab36e9a970736527ae2e8e73b723a3de4">fp_weights</a> ()</td></tr>
<tr class="separator:ab36e9a970736527ae2e8e73b723a3de4 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a399de786010af74ec685bc27b9edba inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a6a399de786010af74ec685bc27b9edba">bp_weights</a> ()</td></tr>
<tr class="separator:a6a399de786010af74ec685bc27b9edba inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fda5d9230f7fe9f33348dc494245cb3 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a8fda5d9230f7fe9f33348dc494245cb3">setup</a> (<a class="el" href="classlbann_1_1Layer.html">Layer</a> *l)</td></tr>
<tr class="separator:a8fda5d9230f7fe9f33348dc494245cb3 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a2b4540ea622609b518d691d68e6db92c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a></td></tr>
<tr class="separator:a2b4540ea622609b518d691d68e6db92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae30b20d94307f03aa6743c46b98eef50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#ae30b20d94307f03aa6743c46b98eef50">m_cur_mask</a></td></tr>
<tr class="separator:ae30b20d94307f03aa6743c46b98eef50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classlbann_1_1regularizer"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classlbann_1_1regularizer')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classlbann_1_1regularizer.html">lbann::regularizer</a></td></tr>
<tr class="memitem:a6d0d44f4f9a3c8c24d0acdda8cf7d4b5 inherit pro_attribs_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1Layer.html">Layer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a></td></tr>
<tr class="separator:a6d0d44f4f9a3c8c24d0acdda8cf7d4b5 inherit pro_attribs_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Dropout: probabilistically drop units from a layer. See this paper for full details: Srivastava, Nitish, et al. "Dropout: a simple way to prevent neural networks
from overfitting." Journal of Machine Learning Research 15.1 (2014). This implementation uses the approach noted in section 10 of that paper of multiplying weights by 1/(keep probability) at training time and not modifying them at test time. The implementation recommends a keep probability of 0.5 for fully-connected layers and 0.8 for input layers as good starting points. </p>

<p>Definition at line <a class="el" href="lbann__dropout_8hpp_source.html#l00047">47</a> of file <a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a35c2c593d6dba74281b39d271ae15ed3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::dropout::dropout </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>keep_prob</em> = <code>0.5f</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Keep units with probabiliy keep_prob. </p>

<p>Definition at line <a class="el" href="lbann__dropout_8cpp_source.html#l00033">33</a> of file <a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;: <a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a>(keep_prob) {}</div>
<div class="ttc" id="classlbann_1_1dropout_html_a2b4540ea622609b518d691d68e6db92c"><div class="ttname"><a href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">lbann::dropout::m_keep_prob</a></div><div class="ttdeci">float m_keep_prob</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00057">lbann_dropout.hpp:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9b1ecd42b39fb914cfb04fde2278e8ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::dropout::bp_activations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Adjust gradients for dropout in backprop. </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1regularizer.html#a520fb6e3ff605f4c5c6de7eda003f0aa">lbann::regularizer</a>.</p>

<p>Definition at line <a class="el" href="lbann__dropout_8cpp_source.html#l00050">50</a> of file <a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                             {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a> == -1.0f) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// Exclude the bottom row, which is 1s.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keyword">auto</span> bp_input = ((<a class="code" href="lbann__base_8hpp.html#a270ddda44ad6a3abd3cfe8358cf581e6">DistMat</a>&amp;) *(<a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8ec7fc7bd902123d7b7788b6284ca62">bp_input</a>))(IR(0, <a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8ec7fc7bd902123d7b7788b6284ca62">bp_input</a>-&gt;Height() - 1),</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                         IR(0, <a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8ec7fc7bd902123d7b7788b6284ca62">bp_input</a>-&gt;Width()));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; local_mat = bp_input.Matrix();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> local_mat_copy(local_mat);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// Re-weight the incoming loss according to how we adjusted weights during</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// forward propagation.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  El::Hadamard(<a class="code" href="classlbann_1_1dropout.html#ae30b20d94307f03aa6743c46b98eef50">m_cur_mask</a>, local_mat_copy, local_mat);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1dropout_html_ae30b20d94307f03aa6743c46b98eef50"><div class="ttname"><a href="classlbann_1_1dropout.html#ae30b20d94307f03aa6743c46b98eef50">lbann::dropout::m_cur_mask</a></div><div class="ttdeci">Mat m_cur_mask</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00059">lbann_dropout.hpp:59</a></div></div>
<div class="ttc" id="classlbann_1_1regularizer_html_a6d0d44f4f9a3c8c24d0acdda8cf7d4b5"><div class="ttname"><a href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">lbann::regularizer::m_layer</a></div><div class="ttdeci">Layer * m_layer</div><div class="ttdef"><b>Definition:</b> <a href="lbann__regularizer_8hpp_source.html#l00074">lbann_regularizer.hpp:74</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a270ddda44ad6a3abd3cfe8358cf581e6"><div class="ttname"><a href="lbann__base_8hpp.html#a270ddda44ad6a3abd3cfe8358cf581e6">DistMat</a></div><div class="ttdeci">El::DistMatrix&lt; DataType &gt; DistMat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00042">lbann_base.hpp:42</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_ab8ec7fc7bd902123d7b7788b6284ca62"><div class="ttname"><a href="classlbann_1_1Layer.html#ab8ec7fc7bd902123d7b7788b6284ca62">lbann::Layer::bp_input</a></div><div class="ttdeci">ElMat * bp_input</div><div class="ttdef"><b>Definition:</b> <a href="lbann__layer_8hpp_source.html#l00129">lbann_layer.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a2b4540ea622609b518d691d68e6db92c"><div class="ttname"><a href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">lbann::dropout::m_keep_prob</a></div><div class="ttdeci">float m_keep_prob</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00057">lbann_dropout.hpp:57</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00040">lbann_base.hpp:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c33aee6cc1323496120bb545cd27148"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::dropout::fp_activations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Drop out units in forward propagation. </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1regularizer.html#a8006f575c31fd152d2f048d50994e9f6">lbann::regularizer</a>.</p>

<p>Definition at line <a class="el" href="lbann__dropout_8cpp_source.html#l00035">35</a> of file <a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                             {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a> == -1.0f) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// Exclude the bottom row, which is 1s.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="comment">// TODO: handle case where Acts is in other distribution</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keyword">auto</span> acts = ((<a class="code" href="lbann__base_8hpp.html#a270ddda44ad6a3abd3cfe8358cf581e6">DistMat</a>&amp;) *(<a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#a1d09f81cc2d47264a38b7eecab9d7307">Acts</a>))(IR(0, <a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#a1d09f81cc2d47264a38b7eecab9d7307">Acts</a>-&gt;Height() - 1),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                                 IR(0, <a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#a1d09f81cc2d47264a38b7eecab9d7307">Acts</a>-&gt;Width()));</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; local_mat = acts.Matrix();</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> local_mat_copy(local_mat);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// Compute acts = (1/p)r * acts where r&#39;s elements are IID Bernoulli and * is</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// element-wise multiplication.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  El::Bernoulli(<a class="code" href="classlbann_1_1dropout.html#ae30b20d94307f03aa6743c46b98eef50">m_cur_mask</a>, local_mat.Height(), local_mat.Width(), <a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  El::Scale(1.0f / <a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a>, <a class="code" href="classlbann_1_1dropout.html#ae30b20d94307f03aa6743c46b98eef50">m_cur_mask</a>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  El::Hadamard(<a class="code" href="classlbann_1_1dropout.html#ae30b20d94307f03aa6743c46b98eef50">m_cur_mask</a>, local_mat_copy, local_mat);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1dropout_html_ae30b20d94307f03aa6743c46b98eef50"><div class="ttname"><a href="classlbann_1_1dropout.html#ae30b20d94307f03aa6743c46b98eef50">lbann::dropout::m_cur_mask</a></div><div class="ttdeci">Mat m_cur_mask</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00059">lbann_dropout.hpp:59</a></div></div>
<div class="ttc" id="classlbann_1_1regularizer_html_a6d0d44f4f9a3c8c24d0acdda8cf7d4b5"><div class="ttname"><a href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">lbann::regularizer::m_layer</a></div><div class="ttdeci">Layer * m_layer</div><div class="ttdef"><b>Definition:</b> <a href="lbann__regularizer_8hpp_source.html#l00074">lbann_regularizer.hpp:74</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a270ddda44ad6a3abd3cfe8358cf581e6"><div class="ttname"><a href="lbann__base_8hpp.html#a270ddda44ad6a3abd3cfe8358cf581e6">DistMat</a></div><div class="ttdeci">El::DistMatrix&lt; DataType &gt; DistMat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00042">lbann_base.hpp:42</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a2b4540ea622609b518d691d68e6db92c"><div class="ttname"><a href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">lbann::dropout::m_keep_prob</a></div><div class="ttdeci">float m_keep_prob</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00057">lbann_dropout.hpp:57</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00040">lbann_base.hpp:40</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a1d09f81cc2d47264a38b7eecab9d7307"><div class="ttname"><a href="classlbann_1_1Layer.html#a1d09f81cc2d47264a38b7eecab9d7307">lbann::Layer::Acts</a></div><div class="ttdeci">ElMat * Acts</div><div class="ttdef"><b>Definition:</b> <a href="lbann__layer_8hpp_source.html#l00124">lbann_layer.hpp:124</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ae30b20d94307f03aa6743c46b98eef50"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> lbann::dropout::m_cur_mask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Current dropout mask (a Bernoulli random matrix). </p>

<p>Definition at line <a class="el" href="lbann__dropout_8hpp_source.html#l00059">59</a> of file <a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2b4540ea622609b518d691d68e6db92c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lbann::dropout::m_keep_prob</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Probability of keeping each unit. </p>

<p>Definition at line <a class="el" href="lbann__dropout_8hpp_source.html#l00057">57</a> of file <a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/lbann/regularization/<a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a></li>
<li>src/regularization/<a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacelbann.html">lbann</a></li><li class="navelem"><a class="el" href="classlbann_1_1dropout.html">dropout</a></li>
    <li class="footer">Generated on Mon Jul 18 2016 10:16:11 for LBANN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
